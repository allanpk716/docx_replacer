<Window x:Class="DocuFiller.Views.Update.UpdateWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="发现新版本" Height="450" Width="600"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        ShowInTaskbar="False">
    <Grid Margin="24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- 标题区域 -->
        <StackPanel Grid.Row="0" Margin="0,0,0,16">
            <TextBlock Text="发现新版本" FontSize="24" FontWeight="Bold" Foreground="{StaticResource SuccessBrush}"/>
            <TextBlock FontSize="14" Foreground="{StaticResource TextSecondaryBrush}" Margin="0,8,0,0">
                <Run Text="当前最新版本: "/>
                <Run Text="{Binding Version}" FontWeight="Bold" Foreground="{StaticResource SuccessBrush}"/>
            </TextBlock>
            <TextBlock FontSize="12" Foreground="{StaticResource TextSecondaryBrush}">
                <Run Text="发布日期: "/>
                <Run Text="{Binding PublishDate, StringFormat='{}{0:yyyy-MM-dd HH:mm}'}"/>
            </TextBlock>
            <TextBlock FontSize="12" Foreground="{StaticResource TextSecondaryBrush}">
                <Run Text="文件大小: "/>
                <Run Text="{Binding FileSizeMB, StringFormat='{}{0} MB'}"/>
            </TextBlock>
        </StackPanel>

        <!-- 更新说明区域 -->
        <Border Grid.Row="1" BorderBrush="{StaticResource BorderBrush}" BorderThickness="1" Padding="16"
                Background="{StaticResource BackgroundBrush}" CornerRadius="4">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <TextBlock Text="{Binding ReleaseNotes}"
                           TextWrapping="Wrap"
                           Foreground="{StaticResource TextPrimaryBrush}"
                           FontSize="13"
                           LineHeight="20"/>
            </ScrollViewer>
        </Border>

        <!-- 下载进度区域 -->
        <StackPanel Grid.Row="2" Margin="0,16,0,0">
            <ProgressBar Height="24"
                         Minimum="0"
                         Maximum="100"
                         Value="{Binding DownloadProgress}"
                         Visibility="{Binding IsDownloading, Converter={StaticResource BooleanToVisibilityConverter}}"/>
            <TextBlock Text="{Binding StatusMessage}"
                       Margin="0,8,0,0"
                       HorizontalAlignment="Center"
                       FontSize="12"
                       Foreground="{StaticResource TextSecondaryBrush}"/>
        </StackPanel>

        <!-- 按钮区域 -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,16,0,0">
            <!-- 稍后提醒按钮 -->
            <Button Content="稍后提醒"
                    Command="{Binding RemindLaterCommand}"
                    Width="100"
                    Height="32"
                    Margin="0,0,8,0"
                    Background="{StaticResource BackgroundBrush}"
                    Foreground="{StaticResource TextSecondaryBrush}"
                    BorderBrush="{StaticResource BorderBrush}"/>
            <!-- 跳过按钮 -->
            <Button Content="跳过此版本"
                    Command="{Binding SkipCommand}"
                    Width="100"
                    Height="32"
                    Margin="0,0,8,0"
                    Background="{StaticResource BackgroundBrush}"
                    Foreground="{StaticResource TextSecondaryBrush}"
                    BorderBrush="{StaticResource BorderBrush}"/>
            <!-- 下载按钮 -->
            <Button Content="下载更新"
                    Command="{Binding DownloadCommand}"
                    Width="100"
                    Height="32"
                    Margin="0,0,8,0"
                    Background="{StaticResource SuccessBrush}"
                    Foreground="White"
                    BorderBrush="{StaticResource SuccessBrush}"
                    Visibility="{Binding IsDownloading, Converter={StaticResource InverseBooleanToVisibilityConverter}}"/>
            <!-- 安装按钮 -->
            <Button Content="立即安装"
                    Command="{Binding InstallCommand}"
                    Width="100"
                    Height="32"
                    Background="{StaticResource WarningBrush}"
                    Foreground="White"
                    BorderBrush="{StaticResource WarningBrush}"
                    Visibility="{Binding CanUpdate, Converter={StaticResource BooleanToVisibilityConverter}}"/>
        </StackPanel>
    </Grid>
</Window>
